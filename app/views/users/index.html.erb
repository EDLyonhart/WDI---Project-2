<%= render "partials/navbar" %>

<div class="container">

  <h2><%= @user.name %></h2>

  <div class="btn-group btn-group-justified">
    <a href="<%= user_matches_path(@user) %>" class="btn btn-default">Find New Matches</a>
    <a href="<%= new_user_resource_path(@user) %>" class="btn btn-default">Add a resource</a>
    <a href="<%= user_show_path(@user) %>" class="btn btn-default">View Public Profile</a>
    <a href="<%= user_edit_path(@user) %>" class="btn btn-default">Edit Profile</a>
  </div>

  <h3>My resources</h3>
  <br>

  <div class="row user_resources_show">
    <div class ="col-md-10 col-md-offset-1">
      <table class ="table table-striped">
        <tr>
          <th>I want it</th>
          <th>I have it</th>
          <th>Category</th>
          <th>Info</th>
          <th>Delete</th>
        </tr>
        <% @resources.each do |resource| %>
          <tr>
            <% if resource.has %>
              <td> </td>
            <% else %>
              <td>X</td>
            <% end %>
            <% if resource.has %>
              <td>X</td>
            <% else %>
              <td> </td>
            <% end %>
            <td><%= resource.category %></td>
            <td><%= link_to('Info', user_resource_path(@user, resource), {class: "btn-xs btn-info"})%></td>
            <td><%= link_to('Delete', user_resource_path(@user, resource), method: :delete, data: { confirm: "Are you sure?" }, class: "btn-xs btn-danger") %></td>
          </tr>
        <% end %>
      </table>
    </div>
  </div>

  <h3>My matches</h3>
  <br>

  <div class="row user_matches_show">
    <div class ="col-md-10 col-md-offset-1">
      <table class ="table table-striped">
        <tr>
          <th>Matched user</th>
          <th>Resource category</th>
          <th>I want it</th>
          <th>I have it</th>
          <th>Info</th>
        </tr>
        <% @matches.each do |match| %>
          <tr>
            <td><%= User.find(match[:matched_user]).name %></td>
            <td><%= match[:category] %></td>
            <% if match[:i_have] %>
              <td> </td>
            <% else %>
              <td>X</td>
            <% end %>
            <% if match[:i_have] %>
              <td>X</td>
            <% else %>
              <td> </td>
            <% end %>
            <td>more info</td>
          </tr>
        <% end %>
      </table>
    </div>
  </div>
  <br>

  <h3>My match requests</h3>
  <br>

  <div class="row user_match_requests_show">
    <div class ="col-md-10 col-md-offset-1">
      <table class ="table table-striped">
        <tr>
          <th>Requesting user</th>
          <th>Interested in your</th>
          <th>Accept</th>
          <th>Reject</th>
        </tr>
        <% @like_requests.each do |like_request| %>
          <tr>
            <td><%= User.find(like_request.user_wants_id).name %></td>
            <td><%= like_request.resource_category %></td>
            <td>accept button</td>
            <td>reject button</td>
          </tr>
        <% end %>
      </table>
    </div>
  </div>

</div>

